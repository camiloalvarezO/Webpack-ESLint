(()=>{"use strict";const e=document.querySelector("#mascota"),t=document.querySelector("#propietario"),a=document.querySelector("#telefono"),n=document.querySelector("#fecha"),o=document.querySelector("#hora"),i=document.querySelector("#sintomas"),r=document.querySelector("#citas"),s=document.querySelector("#nueva-cita"),c=document.querySelector("#administra"),d=new class{constructor(){this.citas=[]}agregarCita(e){this.citas=[...this.citas,e]}editarCita(e){this.citas=this.citas.map((t=>t.id===e.id?e:t))}eliminarCita(e){this.citas=this.citas.filter((t=>t.id!==e))}},l=new class{constructor(e){let{citas:t}=e;this.textoHeading(t)}imprimirAlerta(e,t){const a=document.querySelector(".alert");a&&a.remove();const n=document.createElement("div");n.classList.add("text-center","alert","d-block","col-12"),n.dataset.cy="alerta","error"===t?n.classList.add("alert-danger"):n.classList.add("alert-success"),n.textContent=e,document.querySelector("#contenido").insertBefore(n,document.querySelector(".agregar-cita")),setTimeout((()=>{n.remove()}),3e3)}imprimirCitas(c){let{citas:u}=c;this.limpiarHTML(),this.textoHeading(u),u.forEach((c=>{const{mascota:u,propietario:h,telefono:f,fecha:g,hora:C,sintomas:v,id:L}=c,b=document.createElement("div");b.classList.add("cita","p-3"),b.dataset.id=L;const y=document.createElement("h2");y.classList.add("card-title","font-weight-bolder"),y.innerHTML=`${u}`;const E=document.createElement("p");E.innerHTML=`<span class="font-weight-bolder">Propietario: </span> ${h}`;const S=document.createElement("p");S.innerHTML=`<span class="font-weight-bolder">Teléfono: </span> ${f}`;const H=document.createElement("p");H.innerHTML=`<span class="font-weight-bolder">Fecha: </span> ${g}`;const q=document.createElement("p");q.innerHTML=`<span class="font-weight-bolder">Hora: </span> ${C}`;const w=document.createElement("p");w.innerHTML=`<span class="font-weight-bolder">Síntomas: </span> ${v}`;const T=document.createElement("button");T.onclick=()=>function(e){d.eliminarCita(e),l.imprimirCitas(d)}(L),T.dataset.cy="eliminar",T.classList.add("btn","btn-danger","mr-2"),T.innerHTML='Eliminar <svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>';const M=document.createElement("button");M.onclick=()=>function(r){const{mascota:c,propietario:d,telefono:l,fecha:u,hora:h,sintomas:f,id:g}=r;p.mascota=c,p.propietario=d,p.telefono=l,p.fecha=u,p.hora=h,p.sintomas=f,p.id=g,e.value=c,t.value=d,a.value=l,n.value=u,o.value=h,i.value=f,s.querySelector('button[type="submit"]').textContent="Guardar Cambios",m=!0}(c),M.dataset.cy="editar",M.classList.add("btn","btn-info"),M.innerHTML='Editar <svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg>',b.appendChild(y),b.appendChild(E),b.appendChild(S),b.appendChild(H),b.appendChild(q),b.appendChild(w),b.appendChild(T),b.appendChild(M),r.appendChild(b)}))}textoHeading(e){e.length>0?c.textContent="Administra tus Citas ":c.textContent="No hay Citas, comienza creando una"}limpiarHTML(){for(;r.firstChild;)r.removeChild(r.firstChild)}}(d);let m=!1;const p={mascota:"",propietario:"",telefono:"",fecha:"",hora:"",sintomas:""};function u(e){p[e.target.name]=e.target.value}function h(e){e.preventDefault();const{mascota:t,propietario:a,telefono:n,fecha:o,hora:i,sintomas:r}=p;""!==t&&""!==a&&""!==n&&""!==o&&""!==i&&""!==r?(m?(d.editarCita({...p}),l.imprimirAlerta("Guardado Correctamente"),s.querySelector('button[type="submit"]').textContent="Crear Cita",m=!1):(p.id=Date.now(),d.agregarCita({...p}),l.imprimirAlerta("Se agregó correctamente")),l.imprimirCitas(d),p.mascota="",p.propietario="",p.telefono="",p.fecha="",p.hora="",p.sintomas="",s.reset()):l.imprimirAlerta("Todos los campos son Obligatorios","error")}new class{constructor(){this.initApp()}initApp(){e.addEventListener("change",u),t.addEventListener("change",u),a.addEventListener("change",u),n.addEventListener("change",u),o.addEventListener("change",u),i.addEventListener("change",u),s.addEventListener("submit",h)}},console.log("desde consola")})();